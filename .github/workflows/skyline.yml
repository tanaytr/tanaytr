name: Generate 2025 Skyline

on:
  schedule:
    - cron: '0 0 * * *'  # Daily
  workflow_dispatch:    # Manual

jobs:
  skyline:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Download skyline SVG
        run: |
          curl -s -o skyline-2025.svg "https://skyline.github.com/tanaytr/2025"
          # If curl fails (404), create a fallback empty city
          if [ $? -ne 0 ]; then
            echo '<svg viewBox="0 0 100 20" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="20" fill="#0d1117"/><text x="50" y="12" fill="#00ff9d" text-anchor="middle" font-size="12">Skyline loading... Commit more for buildings! ğŸ™ï¸</text></svg>' > skyline-2025.svg
          fi

      - name: Commit to skyline branch
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "chore: update 2025 skyline SVG âœ¨"
          branch: skyline-2025
          create_branch: true
          file_pattern: skyline-2025.svg
